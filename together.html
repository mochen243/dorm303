<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>准备跳转…</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600;700;800&display=swap" rel="stylesheet">
<style>
  :root{
    --bg-a:#f7fbff; /* very light */
    --bg-b:#eef6ff; /* soft sky */
    --card-bg: rgba(255,255,255,0.9);
    --accent-a:#06b6d4; /* cyan-teal */
    --accent-b:#7c5cff; /* violet */
    --accent-c:#ff7aa2; /* soft coral */
    --text:#072135; /* dark navy for legibility */
    --muted:rgba(7,33,53,0.6);
    --glass: rgba(255,255,255,0.6);
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;background:radial-gradient(1200px 600px at 12% 18%, rgba(124,92,255,0.03), transparent),linear-gradient(180deg,var(--bg-a),var(--bg-b));font-family:Poppins,Inter,system-ui,Arial;color:var(--text);display:flex;align-items:center;justify-content:center}

  /* larger frame */
  .wrap{width:min(1200px,96vw);height:min(820px,92vh);position:relative;border-radius:20px;overflow:hidden;padding:28px;display:flex;align-items:center;justify-content:center}
  .card{width:94%;height:92%;border-radius:18px;background:linear-gradient(180deg,var(--card-bg),rgba(245,251,255,0.9));backdrop-filter:blur(6px);position:relative;overflow:hidden;box-shadow:0 40px 120px rgba(20,40,80,0.08)}

  /* refined title (now darker for light bg) */
  .title{position:absolute;top:5%;left:50%;transform:translateX(-50%);font-weight:800;letter-spacing:1.6px;font-size:36px;color:var(--text);z-index:30}

  .stage{position:absolute;inset:0;display:flex;align-items:center;justify-content:center}

  /* HUD larger */
  .hud{position:absolute;bottom:6%;left:50%;transform:translateX(-50%);z-index:40;display:flex;flex-direction:column;align-items:center;gap:12px}
  .ring-holder{width:180px;height:180px;position:relative}
  .count{font-weight:800;color:var(--text);letter-spacing:0.6px;font-size:20px}

  /* skip button refined */
  .skip{position:absolute;right:22px;top:22px;padding:10px 16px;border-radius:999px;background:var(--glass);border:1px solid rgba(7,33,53,0.06);color:var(--text);cursor:pointer;z-index:50}
  .skip:hover{box-shadow:0 12px 30px rgba(124,92,255,0.06)}

  /* cinematic overlays tuned for light bg */
  .flare{position:absolute;left:50%;top:46%;transform:translate(-50%,-50%);pointer-events:none;width:36%;height:36%;border-radius:50%;mix-blend-mode:screen;opacity:0}
  .shock{position:absolute;left:50%;top:46%;transform:translate(-50%,-50%) scale(0.2);width:28%;height:28%;border-radius:50%;border:0 solid rgba(7,33,53,0.06);pointer-events:none;opacity:0}

  /* subtle overlay texture */
  .scanline{position:absolute;inset:0;background:repeating-linear-gradient(180deg,rgba(7,33,53,0.01) 0 1px, transparent 1px 6px);mix-blend-mode:overlay;pointer-events:none;opacity:0.06}

  canvas{position:absolute;inset:0;pointer-events:none}

  .label-small{display:none}
  .label-sub{display:none}

  @media (max-width:920px){.title{font-size:26px}.ring-holder{width:140px;height:140px}}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <div class="title">准备跳转</div>

      <div class="stage" id="stage">
        <!-- cinematic elements -->
        <div class="flare" id="flare"></div>
        <div class="shock" id="shock"></div>

        <div class="hud">
          <div class="ring-holder">
            <svg viewBox="0 0 100 100" class="ring-svg"><defs><linearGradient id="g1" x1="0%" x2="100%"><stop offset="0%" stop-color="#06b6d4"/><stop offset="60%" stop-color="#7c5cff"/><stop offset="100%" stop-color="#ff7aa2"/></linearGradient></defs>
              <circle cx="50" cy="50" r="44" stroke="rgba(7,33,53,0.06)" stroke-width="12" fill="none"/>
              <circle id="ring" cx="50" cy="50" r="44" stroke="url(#g1)" stroke-width="12" stroke-linecap="round" stroke-dasharray="0 277" fill="none"/>
            </svg>
          </div>
          <div class="count" id="count">2s</div>
        </div>

        <div class="skip" id="skip">跳过</div>

        <canvas id="streaks"></canvas>
        <canvas id="particles"></canvas>
        <div class="scanline" aria-hidden="true"></div>
      </div>
    </div>
  </div>

<script>
  // ======= CONFIG =======
  const TARGET_URL = 'https://mochen243.github.io/together/';
  const TOTAL_MS = 2000; // 毫秒
  // ======================

  // progress ring
  const ring = document.getElementById('ring'); const countEl = document.getElementById('count');
  let start = null;
  function raf(ts){ if(!start) start = ts; const elapsed = ts - start; const pct = Math.min(1, elapsed / TOTAL_MS); const dash = 277 * pct; ring.setAttribute('stroke-dasharray', dash + ' 277'); const remaining = Math.max(0, Math.ceil((TOTAL_MS - elapsed)/1000)); countEl.textContent = remaining + 's'; if(elapsed < TOTAL_MS) requestAnimationFrame(raf); else finish(); }
  requestAnimationFrame(raf);

  document.getElementById('skip').addEventListener('click', ()=>finish(true));

  // canvas setup
  const s = document.getElementById('streaks'); const ps = document.getElementById('particles');
  const sctx = s.getContext('2d'); const pctx = ps.getContext('2d');
  function resize(){ s.width = ps.width = innerWidth; s.height = ps.height = innerHeight; }
  resize(); window.addEventListener('resize', resize);

  // streak system (dramatic swooshes)
  const streaks = [];
  function spawnStreak(){ const angle = (Math.random()*80-40)*Math.PI/180; const len = 600 + Math.random()*900; const sx = innerWidth/2 + (Math.random()-0.5)*400; const sy = innerHeight/2 + (Math.random()-0.5)*240; streaks.push({x:sx,y:sy,dx:Math.cos(angle)*len,dy:Math.sin(angle)*len,life:70,age:0}); }
  for(let i=0;i<10;i++) spawnStreak();
  function drawStreaks(){ sctx.clearRect(0,0,s.width,s.height); sctx.globalCompositeOperation='lighter'; for(let i=streaks.length-1;i>=0;i--){ const st=streaks[i]; st.age++; const life=1-st.age/st.life; if(life<=0){ streaks.splice(i,1); continue } const grd = sctx.createLinearGradient(st.x,st.y,st.x+st.dx,st.y+st.dy); grd.addColorStop(0,'rgba(6,182,212,'+(0.32*life)+')'); grd.addColorStop(0.5,'rgba(124,92,255,'+(0.22*life)+')'); grd.addColorStop(1,'rgba(255,122,162,'+(0.10*life)+')'); sctx.strokeStyle = grd; sctx.lineWidth = 4*(0.6+life); sctx.lineCap='round'; sctx.beginPath(); sctx.moveTo(st.x,st.y); sctx.lineTo(st.x+st.dx*life,st.y+st.dy*life); sctx.stroke(); } requestAnimationFrame(drawStreaks);} drawStreaks();

  // particles (spark + embers)
  const parts = [];
  function spawnParts(n,center){ for(let i=0;i<n;i++){ const ang = Math.random()*Math.PI*2; const speed = 1 + Math.random()*8; const cx = center?.x ?? innerWidth/2; const cy = center?.y ?? innerHeight/2; parts.push({x:cx,y:cy,vx:Math.cos(ang)*speed,vy:Math.sin(ang)*speed,size:Math.random()*3+0.8,life:40+Math.random()*160,age:0,h:160+Math.random()*120,alpha:0.9}); } }
  spawnParts(220);
  function drawParts(){ pctx.clearRect(0,0,ps.width,ps.height); pctx.globalCompositeOperation='lighter'; for(let i=parts.length-1;i>=0;i--){ const p = parts[i]; p.x += p.vx; p.y += p.vy; p.vx *= 0.992; p.vy *= 0.992; p.age++; const life = 1 - p.age/p.life; if(life<=0){ parts.splice(i,1); continue } pctx.beginPath(); pctx.fillStyle = `hsla(${p.h},90%,60%,${p.alpha*life})`; pctx.arc(p.x,p.y,p.size*(1+(1-life)*1.8),0,Math.PI*2); pctx.fill(); pctx.beginPath(); pctx.fillStyle = `rgba(255,255,255,${0.02*p.alpha})`; pctx.arc(p.x - p.vx*2, p.y - p.vy*2, p.size*6,0,Math.PI*2); pctx.fill(); } requestAnimationFrame(drawParts);} drawParts();

  // finish: big cinematic burst, shockwave + flare + zoom
  const flare = document.getElementById('flare'); const shock = document.getElementById('shock');
  function finish(skip=false){ // dramatic timing
    // big streak spawn
    for(let i=0;i<48;i++) spawnStreak(); spawnParts(520,{x:innerWidth/2,y:innerHeight/2});
    // shockwave
    shock.style.transition = 'transform 360ms ease-out, opacity 360ms ease-out, border-width 360ms ease-out';
    shock.style.opacity = '0.12'; shock.style.border = '2px solid rgba(7,33,53,0.06)'; shock.style.transform = 'translate(-50%,-50%) scale(1)';
    // flare flash
    flare.style.opacity = '1'; flare.style.background = 'radial-gradient(circle at 50% 45%, rgba(255,122,162,0.9), rgba(102,160,255,0.45) 30%, transparent 55%)';
    flare.animate([{opacity:0.0, transform:'scale(0.8)'},{opacity:1, transform:'scale(1.06)'},{opacity:0}],{duration:360, easing:'cubic-bezier(.2,.9,.2,1)'});
    // subtle zoom effect on card
    const card = document.querySelector('.card'); card.animate([{transform:'scale(1)'},{transform:'scale(1.03)'},{transform:'scale(1.01)'}],{duration:420,iterations:1,easing:'cubic-bezier(.2,.9,.2,1)'});

    if(skip) window.location.href = TARGET_URL; else setTimeout(()=>window.location.href = TARGET_URL,420);
  }

  // user hover intensify
  document.getElementById('stage').addEventListener('mouseenter', ()=>{ spawnParts(36); for(let i=0;i<4;i++) spawnStreak(); });

  // accessibility
  (function(){const el=document.createElement('div');el.setAttribute('aria-live','polite');el.style.position='absolute';el.style.left='-9999px';el.textContent='即将跳转';document.body.appendChild(el)})();

</script>
</body>
</html>
